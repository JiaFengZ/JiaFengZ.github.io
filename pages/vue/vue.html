<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>jf blob</title>
    <meta name="description" content="jf的blob">
    <link rel="icon" href="/blob.jpg">
    
    <link rel="preload" href="/assets/css/0.styles.b773ea28.css" as="style"><link rel="preload" href="/assets/js/app.d2fccc8c.js" as="script"><link rel="preload" href="/assets/js/2.ae3a5b9e.js" as="script"><link rel="preload" href="/assets/js/8.7a54c80d.js" as="script"><link rel="prefetch" href="/assets/js/3.5934b251.js"><link rel="prefetch" href="/assets/js/4.059ac781.js"><link rel="prefetch" href="/assets/js/5.a40afbd7.js"><link rel="prefetch" href="/assets/js/6.5a7c375d.js"><link rel="prefetch" href="/assets/js/7.92d3af19.js"><link rel="prefetch" href="/assets/js/9.6613c730.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b773ea28.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/blob.jpg" alt="jf blob" class="logo"> <span class="site-name can-hide">jf blob</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="分类" class="dropdown-title"><span class="title">分类</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/react/react.html" class="nav-link">react</a></li><li class="dropdown-item"><!----> <a href="/pages/vue/vue.html" class="nav-link router-link-exact-active router-link-active">vue</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/jiaFengZ" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="分类" class="dropdown-title"><span class="title">分类</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/react/react.html" class="nav-link">react</a></li><li class="dropdown-item"><!----> <a href="/pages/vue/vue.html" class="nav-link router-link-exact-active router-link-active">vue</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/jiaFengZ" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>vue</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/vue/vue.html" class="active sidebar-link">vue</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/vue/vue.html#_4-1-路由文件拆分" class="sidebar-link">4.1 路由文件拆分</a></li><li class="sidebar-sub-header"><a href="/pages/vue/vue.html#_4-2-路由组件懒加载以及分块打包" class="sidebar-link">4.2 路由组件懒加载以及分块打包</a></li><li class="sidebar-sub-header"><a href="/pages/vue/vue.html#_4-3-利用路由导航守卫控制页面访问权限" class="sidebar-link">4.3 利用路由导航守卫控制页面访问权限</a></li><li class="sidebar-sub-header"><a href="/pages/vue/vue.html#_4-4-路由组件传参" class="sidebar-link">4.4 路由组件传参</a></li><li class="sidebar-sub-header"><a href="/pages/vue/vue.html#_4-4-alias路由别名的使用" class="sidebar-link">4.4 alias路由别名的使用</a></li><li class="sidebar-sub-header"><a href="/pages/vue/vue.html#_4-5-路由导航流程" class="sidebar-link">4.5 路由导航流程</a></li><li class="sidebar-sub-header"><a href="/pages/vue/vue.html#_5-1-vuex-作用结构图：" class="sidebar-link">5.1 vuex 作用结构图：</a></li><li class="sidebar-sub-header"><a href="/pages/vue/vue.html#_5-2-vuex-分模块" class="sidebar-link">5.2 vuex 分模块</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p>记第一个vue项目
<a href="https://github.com/JiaFengZ/work-summary/blob/master/doc/summary-vue.md" target="_blank" rel="noopener noreferrer">原文<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h1 id="_1-技术选型"><a href="#_1-技术选型" class="header-anchor">#</a> 1 技术选型</h1> <ul><li>使用 <code>.vue</code> 单文件组件构建代码（<a href="https://cn.vuejs.org/v2/guide/index.html" target="_blank" rel="noopener noreferrer">文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>）</li> <li>使用 <code>vuex</code> 管理状态（<a href="https://vuex.vuejs.org/zh/guide/" target="_blank" rel="noopener noreferrer">文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>）</li> <li>使用 <code>vue-router</code> 管理页面路由（<a href="https://router.vuejs.org/zh/" target="_blank" rel="noopener noreferrer">文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>）</li> <li>使用 <code>axios</code> 作为 http 请求库(<a href="https://github.com/axios/axios" target="_blank" rel="noopener noreferrer">文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>)</li> <li>使用 <code>iview</code> 作为 UI 库(<a href="https://www.iviewui.com/docs/guide/install" target="_blank" rel="noopener noreferrer">文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>)</li> <li>可结合使用 <code>jsx</code> 语法构建 html 模版，使得具有完全编程能力书写模版（<a href="https://github.com/vuejs/babel-plugin-transform-vue-jsx" target="_blank" rel="noopener noreferrer">文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>）</li></ul> <h1 id="_2-文件结构"><a href="#_2-文件结构" class="header-anchor">#</a> 2 文件结构</h1> <div class="language- line-numbers-mode"><pre class="language-text"><code>-- public 
    -- index.html 打包入口模版html
-- src 源代码
    -- api 和服务端的数据交互
    -- components 组件代码
        -- global 全局通用组件
    -- plugins 第三方插件
    -- utils 工具函数库
        -- utils 工具函数    
    -- services 其他一些通用服务
    -- store vuex配置文件
        -- index.js
        -- actions.js
        -- getters.js
        -- mutations.js
    -- router 路由配置
    -- sass
        -- _variables.scss 全局变量，主题配置
        -- global.scss 应用级设置
    -- images 图片
-- packjson.json npm 依赖配置，
-- vue.config.js vue 额外配置
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h1 id="_3-项目库依赖列表"><a href="#_3-项目库依赖列表" class="header-anchor">#</a> 3 项目库依赖列表</h1> <p>除使用vue cli初始化vue项目的初始依赖外，其他依赖库如下：
<code>dependencies</code></p> <ul><li><code>axios</code> http 请求库</li> <li><code>echarts</code> 绘制图表的库</li> <li><code>iview</code> UI 控件库</li> <li><code>jsonp</code> jsonp请求库，由于axios不支持jsonp请求，需引用该库</li> <li><code>ol</code> openlayer 地图库</li> <li><code>wangeditor</code> 富文本编辑器</li> <li><code>pdfjs-dist</code> pdf预览插件</li></ul> <p><code>devDependencies</code></p> <ul><li><code>node-sass</code> 配置使用scss</li> <li><code>sass-loader</code> 配置使用scss</li></ul> <h1 id="_4-vue-router记录一二"><a href="#_4-vue-router记录一二" class="header-anchor">#</a> 4 vue-router记录一二</h1> <p>构建单页面应用，通过匹配不同路由规则局部更新模版，规则-&gt;模版，参数传递，视图嵌套，导航控制，拦截守卫</p> <h2 id="_4-1-路由文件拆分"><a href="#_4-1-路由文件拆分" class="header-anchor">#</a> 4.1 路由文件拆分</h2> <p>初始开发时所有路由配置文件均写在同一个配置文件 <code>router/index.js</code> 下，随着模块的增加，配置文件变得臃肿，足足有上千行配置，难以查找维护，而且不便于多人协作。
因此按照模块划分了多个路由配置文件，在主文件中导入分模块配置数组，通过 <code>...</code> 展开合并到到主路由配置数组中。</p> <h2 id="_4-2-路由组件懒加载以及分块打包"><a href="#_4-2-路由组件懒加载以及分块打包" class="header-anchor">#</a> 4.2 路由组件懒加载以及分块打包</h2> <p>为了有更好的首页加载速度，路由组件使用了动态组件懒加载，具体就是使用一个 Promise 的工厂函数动态返回组件：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">{</span>
    path<span class="token punctuation">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">component</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token operator">=&gt;</span>  <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/components/App'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>使用了路由懒加载后，各个组件将会打包成异步加载的单独文件，但是由于组件众多，所以按照模块划分把某个模块路由下的所有组件都打包在同个异步块 (chunk) 中，减少
文件数，同时兼顾了加载速度：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">Foo</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: &quot;group-foo&quot; */</span> <span class="token string">'./Foo.vue'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token function-variable function">Bar</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: &quot;group-foo&quot; */</span> <span class="token string">'./Bar.vue'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token function-variable function">Baz</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: &quot;group-foo&quot; */</span> <span class="token string">'./Baz.vue'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="_4-3-利用路由导航守卫控制页面访问权限"><a href="#_4-3-利用路由导航守卫控制页面访问权限" class="header-anchor">#</a> 4.3 利用路由导航守卫控制页面访问权限</h2> <p>前端需要根据权限控制页面、菜单、功能按钮的可见性，而一些用户需要鉴权访问的页面路径则需要在路由中进行处理。
在 <code>beforeEnter(to, from, next)</code> 中调用接口，返回一个Promise判断有无权限，如有权限则 <code>next()</code> 进入路由页面，如无权限则<code>next(new Error())</code>
抛出一个错误，在<code>router.onError(() =&gt; {})</code>回调中处理错误，提示非法访问。</p> <h2 id="_4-4-路由组件传参"><a href="#_4-4-路由组件传参" class="header-anchor">#</a> 4.4 路由组件传参</h2> <p>通过 <code>props</code> 给路由参数和组件解耦，在组件中通过 <code>props</code> 选项获取参数</p> <ul><li>布尔模式：设置为 true，route.params 将会被设置为组件属性</li> <li>对象模式：如果 props 是一个对象，它会被按原样设置为组件属性。这种在参数静态不变情况下是有用的。</li> <li>函数模式：创建一个函数返回 props。可以将参数转换成另一种类型，将静态值与基于路由的值结合等等。<code>props: (route) =&gt; ({ query: route.query.q })</code></li></ul> <h2 id="_4-4-alias路由别名的使用"><a href="#_4-4-alias路由别名的使用" class="header-anchor">#</a> 4.4 alias路由别名的使用</h2> <p>给路由的url设置别名，那么访问该别名ur也是有效的，按照这个路由匹配规则进行匹配访问</p> <h2 id="_4-5-路由导航流程"><a href="#_4-5-路由导航流程" class="header-anchor">#</a> 4.5 路由导航流程</h2> <ul><li>导航被触发。</li> <li>在失活的组件里调用 beforeRouteLeave 离开守卫。</li> <li>调用全局的 beforeEach 守卫。<code>加载进度条</code></li> <li>在重用的组件里调用 beforeRouteUpdate。</li> <li>在路由配置里调用 beforeEnter。<code>权限判断</code></li> <li>解析异步路由组件。</li> <li>在被激活的组件里调用 beforeRouteEnter。<code>数据获取</code></li> <li>调用全局的 beforeResolve。</li> <li>导航被确认。</li> <li>调用全局的 afterEach 钩子。<code>隐藏进度条</code></li> <li>触发 DOM 更新。</li> <li>用创建好的实例调用 beforeRouteEnter 守卫中传给 next 的回调函数。<code>获取数据时截取组件实例，附加数据</code>
总结：
全局 <code>beforeEach</code> <code>beforeResolve</code> <code>afterEach</code>
组件 <code>beforeRouteLeave</code> <code>beforeRouteUpdate</code> <code>beforeRouteEnter</code>
配置 <code>beforeEnter</code></li></ul> <h1 id="_5-vuex-使用记录一二"><a href="#_5-vuex-使用记录一二" class="header-anchor">#</a> 5 vuex 使用记录一二</h1> <h2 id="_5-1-vuex-作用结构图："><a href="#_5-1-vuex-作用结构图：" class="header-anchor">#</a> 5.1 vuex 作用结构图：</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>                                --------&gt;------- actions（动作） ----&gt;----
                                |                                                                |
vue components ---                                                       mutations（变动）
                                |                                                                |
                                --------&lt;------- state（数据存储）---&lt;----
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>component -&gt; actions : <code>store.dispatch('action')</code> 组件层派发动作，可以是异步操作，进而通过commit mutation改变 state <code>mapMutations({xxx (commit) {}})</code>
actions -&gt; mutations : <code>store.commit('mutation', payload)</code> 同步变更 state 数据存储 <code>mapAction({xxx (dispatch) {}})</code>
state -&gt; components : state 改变驱动渲染更新组件，<code>this.$store.state</code> <code>mapState({state =&gt; state.xxx})</code></p> <h2 id="_5-2-vuex-分模块"><a href="#_5-2-vuex-分模块" class="header-anchor">#</a> 5.2 vuex 分模块</h2> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> moduleA <span class="token operator">=</span> <span class="token punctuation">{</span>
  state<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  mutations<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  actions<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  getters<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> moduleB <span class="token operator">=</span> <span class="token punctuation">{</span>
  state<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  mutations<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  actions<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  modules<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    a<span class="token punctuation">:</span> moduleA<span class="token punctuation">,</span>
    b<span class="token punctuation">:</span> moduleB
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>a <span class="token comment">// -&gt; moduleA 的状态</span>
store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>b <span class="token comment">// -&gt; moduleB 的状态</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h1 id="_6-axios-使用记录一二"><a href="#_6-axios-使用记录一二" class="header-anchor">#</a> 6 axios 使用记录一二</h1> <p><code>axios</code> 提供的功能有：</p> <ul><li><code>interceptors</code> 拦截器 未登录重定向，全局错误处理</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//添加请求拦截器</span>
axios<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">config</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//在发送请求之前做某事</span>
    <span class="token keyword">return</span> config<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//请求错误时做些事</span>
    <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//添加响应拦截器</span>
axios<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//对响应数据做些事</span>
     <span class="token keyword">return</span> response<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//请求错误时做些事</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">.</span>response<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token string">'401'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//未登录重定向值登录页面</span>
        router<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token punctuation">{</span>path<span class="token punctuation">:</span> <span class="token string">'/login'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">.</span>response<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token string">'403'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        router<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token punctuation">{</span>path<span class="token punctuation">:</span> <span class="token string">'/login'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><ul><li><code>Cancellation</code> 取消请求 快速切换查询条件时</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> CancelToken <span class="token operator">=</span> axios<span class="token punctuation">.</span>CancelToken<span class="token punctuation">;</span>
<span class="token comment">//生成一个请求标记源</span>
<span class="token keyword">const</span> source <span class="token operator">=</span> CancelToken<span class="token punctuation">.</span><span class="token function">source</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'xxxx'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  cancelToken<span class="token punctuation">:</span> source<span class="token punctuation">.</span>token
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">thrown</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>axios<span class="token punctuation">.</span><span class="token function">isCancel</span><span class="token punctuation">(</span>thrown<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Request canceled'</span><span class="token punctuation">,</span> thrown<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// handle error</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 通过请求标记源取消请求</span>
source<span class="token punctuation">.</span><span class="token function">cancel</span><span class="token punctuation">(</span><span class="token string">'Operation canceled by the user.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><ul><li>全局配置</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>axios<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>baseURL <span class="token operator">=</span> <span class="token string">'https://api.example.com'</span><span class="token punctuation">;</span>
axios<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>common<span class="token punctuation">[</span><span class="token string">'Authorization'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token constant">AUTH_TOKEN</span><span class="token punctuation">;</span>
axios<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>post<span class="token punctuation">[</span><span class="token string">'Content-Type'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'application/x-www-form-urlencoded'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h1 id="_7-vue-的生命周期"><a href="#_7-vue-的生命周期" class="header-anchor">#</a> 7 vue 的生命周期</h1> <ul><li><code>beforeCreate</code> （创建前），在数据观测和初始化事件还未开始</li> <li><code>created</code> （创建后），完成数据观测，属性和方法的运算，初始化事件， $el 属性还没有显示出来，this组件属性方法可见</li> <li><code>beforeMount</code> （载入前），在挂载开始之前被调用，相关的render函数首次被调用。实例已完成以下的配置：编译模板，把data里面的数据和模板生成html。注意此时还没有挂载html到页面上</li> <li><code>mounted</code> （载入后），在el 被新创建的 vm.$el 替换，并挂载到实例上去之后调用。实例已完成以下的配置：用上面编译好的html内容替换el属性指向的DOM对象。完成模板中的html渲染到html页面中。此过程中进行ajax交互</li> <li><code>beforeUpdate</code> （更新前），在数据更新之前调用，发生在虚拟DOM重新渲染和打补丁之前。可以在该钩子中进一步地更改状态，不会触发附加的重渲染过程</li> <li><code>updated</code> （更新后），在由于数据更改导致的虚拟DOM重新渲染和打补丁之后调用。调用时，组件DOM已经更新，所以可以执行依赖于DOM的操作</li> <li><code>beforeDestroy</code> （销毁前），在实例销毁之前调用。实例仍然完全可用</li> <li><code>destroyed</code> （销毁后），在实例销毁之后调用。调用后，所有的事件监听器会被移除，所有的子实例也会被销毁。该钩子在服务器端渲染期间不被调用</li></ul> <h1 id="_8-vue-组件的通信"><a href="#_8-vue-组件的通信" class="header-anchor">#</a> 8 vue 组件的通信</h1> <ul><li>父组件传给子组件：子组件通过props方法接受数据</li> <li>子组件传给父组件： $emit 方法传递参数</li> <li><code>this.$listeners</code> 获取所有父组件传递的事件方法集合</li> <li><code>this.$attributes</code> 获取除了 props 声明的其他自定义属性集合</li> <li>非父子组件间的数据传递，兄弟组件传值，通过 eventBus 实例作为事件中心，用于传递和接收事件</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> bus <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> bus <span class="token keyword">from</span> <span class="token string">'bus'</span><span class="token punctuation">;</span>
bus<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">'sendData'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

bus<span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'sendData'</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h1 id="_9-项目配置以及打包"><a href="#_9-项目配置以及打包" class="header-anchor">#</a> 9 项目配置以及打包</h1> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm run build
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>生成<code>static</code>目录，复制至<code>resources</code>目录下，访问 <code>/index.html</code>即可</p> <p>其他几点说明：</p> <ul><li>打包默认使用的是 <code>public/index.html</code> 作为入口模版文件</li> <li>默认打包编译输出 dist 目录，而且静态资源文件引用的根路径相对于dist， 修改打包输出文件夹名称，vue.config.js 中配置：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>outputDir: 'static'
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>默认输出文件是index.html，可修改打包输出文件名称，vue.config.js 中配置：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>indexPath: 'app.html'
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>部署应用包时的基本 URL默认是根路径 <code>/</code>，即部署后访路径为 <code>http://xxx.xxx.xxx:xxx/index.html</code>，可 vue.config.js 中配置修改：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>baseUrl: 'app'
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>则部署后访路径为  <code>http://xxx.xxx.xxx:xxx/app/index.html</code></p> <h3 id="检验代码格式规范"><a href="#检验代码格式规范" class="header-anchor">#</a> 检验代码格式规范</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm run lint
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.d2fccc8c.js" defer></script><script src="/assets/js/2.ae3a5b9e.js" defer></script><script src="/assets/js/8.7a54c80d.js" defer></script>
  </body>
</html>
